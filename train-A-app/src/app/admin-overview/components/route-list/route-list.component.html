<div class="route">
  <div class="route__spinner" *ngIf="isLoading$ | async">
    <mat-spinner></mat-spinner>
  </div>
  <div class="route__error" *ngIf="error$ | async">
    <p>{{ error$ | async }}</p>
  </div>
  <ng-container *ngIf="!(isLoading$ | async) && !(error$ | async)">
    <ng-container *ngTemplateOutlet="routes"></ng-container>
  </ng-container>
  <ng-template #routes>
    <div *ngIf="(formState$ | async)?.editMode !== 'create'">
      <app-create-button (clickOnButton)="openForm()"></app-create-button>
    </div>
    <app-route-panel>
      <app-route-form
        [editMode]="(formState$ | async)?.editMode || 'create'"
        [routeForUpdating]="(formState$ | async)?.route || null"
      />
    </app-route-panel>
    <ul>
      <li *ngFor="let route of routesWithStationsAndCarriages$ | async">
        <app-route-item [item]="route.route" [carriagesName]="route.carriageName"></app-route-item>
      </li>
    </ul>
  </ng-template>
</div>
