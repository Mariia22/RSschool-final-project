<div class="signup">
  @if (loginStatus) {
    <h2 class="label">You are logged in</h2>
  } @else {
    <h2 class="form__title">Sign Up</h2>
    <form [formGroup]="signupForm" (ngSubmit)="onSubmit()" class="signup__form form">
      <label for="email" class="form__label">Email</label>
      <input
        id="email"
        formControlName="email"
        type="text"
        class="form__input"
        [class.form__input--error]="isControlInvalid('email')"
      />
      @if (isControlInvalid('email')) {
        <p class="form__error">{{ getErrorMessage('email') }}</p>
      }
      <label for="password" class="form__label">Password</label>
      <input
        id="password"
        formControlName="password"
        type="password"
        class="form__input"
        [class.form__input--error]="isControlInvalid('password')"
      />
      @if (isControlInvalid('password')) {
        <p class="form__error">{{ getErrorMessage('password') }}</p>
      }
      <label for="repeatPassword" class="form__label">Repeat password</label>
      <input
        id="repeatPassword"
        formControlName="repeatPassword"
        type="password"
        class="form__input"
        [class.form__input--error]="isControlInvalid('repeatPassword') || isRepeatPassInvalid"
      />
      @if (isControlInvalid('repeatPassword')) {
        <p class="form__error">{{ getErrorMessage('repeatPassword') }}</p>
      }
      @if (
        this.signupForm.errors?.['passwordNotMatch'] &&
        this.signupForm.controls['repeatPassword'].touched
      ) {
        <p class="form__error">Passwords does not match</p>
      }
      <div class="form__controls">
        <button mat-flat-button [disabled]="signupForm.invalid" type="submit">Sign Up</button>
        <a class="form__link" routerLink="/signin" routerLinkActive="active">Sign In</a>
      </div>
    </form>
    <!-- <pre>
      Form Error - {{ signupForm.errors | json }}
    </pre> -->
  }
</div>
